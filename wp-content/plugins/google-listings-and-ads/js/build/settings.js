"use strict";(self.webpackChunkgoogle_listings_and_ads=self.webpackChunkgoogle_listings_and_ads||[]).push([[571],{596:function(e,t,n){n.r(t),n.d(t,{default:function(){return ue}});var o=n(9307),c=n(431),l=n(3108),a=n(3816),s=n(1969),i=n(146),r=n(2295),d=n(5736),g=n(5609),u=n(2548),m=n(5004),E=n(6883),h=n(3497),_=n(965),f=n(1142),p=n(8300),y=n(6313),Z=n(5631),C=n(332),A=n(5699),b=n(1693),v=n(7462);function G(e){return(0,o.createElement)(b.Z,(0,v.Z)({title:(0,d.__)("Linked accounts","google-listings-and-ads"),description:(0,d.__)("A WordPress.com account, Google account, and Google Merchant Center account are required to use this extension in WooCommerce.","google-listings-and-ads")},e))}var w=n(591),k=n(8144),D=n(533);const N="all-accounts",S="ads-account",T={[N]:{title:(0,d.__)("Disconnect all accounts","google-listings-and-ads"),confirmButton:(0,d.__)("Disconnect all accounts","google-listings-and-ads"),confirmation:(0,d.__)("Yes, I want to disconnect all my accounts.","google-listings-and-ads"),contents:[(0,d.__)("I understand that I am disconnecting any WordPress.com account, Google account, Google Merchant Center account and Google Ads account connected to this extension.","google-listings-and-ads"),(0,d.__)("Any active product listings will continue to show on Google. They can be managed, edited, or deleted manually from Google Merchant Center (merchants.google.com).","google-listings-and-ads"),(0,d.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads")]},[S]:{title:(0,d.__)("Disconnect Google Ads account","google-listings-and-ads"),confirmButton:(0,d.__)("Disconnect Google Ads Account","google-listings-and-ads"),confirmation:(0,d.__)("Yes, I want to disconnect my Google Ads account.","google-listings-and-ads"),contents:[(0,d.__)("I understand that I am disconnecting my Google Ads account from this WooCommerce extension.","google-listings-and-ads"),(0,d.__)("Any ongoing paid campaigns will continue to run. They can be managed, edited, or deleted manually from Google Ads (ads.google.com).","google-listings-and-ads"),(0,d.__)("Some configurations for Google Ads created through WooCommerce may be lost. This cannot be undone.","google-listings-and-ads")]}};function x(e){let{disconnectTarget:t,onRequestClose:n,onDisconnected:c}=e;const[l,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)(!1),r=(0,D.T)(),{title:u,confirmButton:m,confirmation:E,contents:h}=T[t],f=()=>{s||n()};return(0,o.createElement)(w.Z,{className:"gla-disconnect-accounts-modal",title:(0,o.createElement)(o.Fragment,null,(0,o.createElement)(k.Z,{size:20}),u),isDismissible:!s,buttons:[(0,o.createElement)(_.Z,{key:"1",isSecondary:!0,disabled:s,onClick:f},(0,d.__)("Never mind","google-listings-and-ads")),(0,o.createElement)(_.Z,{key:"2",isPrimary:!0,isDestructive:!0,loading:s,disabled:!l,onClick:()=>{const e=t===N?r.disconnectAllAccounts:r.disconnectGoogleAdsAccount;i(!0),e().then((()=>{c(),n()})).catch((()=>{i(!1)}))}},m)],onRequestClose:f},h.map(((e,t)=>(0,o.createElement)("p",{key:t},e))),(0,o.createElement)(g.CheckboxControl,{label:E,checked:l,disabled:s,onChange:a}))}function I(e){return(0,o.createElement)(x,e)}var P=n(1410);const{CONNECTED:L,INCOMPLETE:O}=l.GOOGLE_ADS_ACCOUNT_STATUS;function q(){const e=(0,u.Z)(),{jetpack:t}=(0,m.Z)(),{google:n}=(0,s.Z)(),{googleMCAccount:c}=(0,E.Z)(),{googleAdsAccount:l}=(0,h.Z)(),a=!(t&&n&&c&&l),r=[L,O].includes(l?.status),[v,w]=(0,o.useState)(null);return(0,o.createElement)(G,null,v&&(0,o.createElement)(I,{onRequestClose:()=>w(null),onDisconnected:()=>{(0,P.HR)("gla_disconnected_accounts",{context:v});const t=v===N?e+(0,i.vm)():window.location.href;window.location.href=t},disconnectTarget:v}),a?(0,o.createElement)(f.Z,null):(0,o.createElement)(p.Z,{size:"large"},(0,o.createElement)(y.qq,{jetpack:t}),(0,o.createElement)(Z.$,{googleAccount:n,hideAccountSwitch:!0}),(0,o.createElement)(C.Z,{googleMCAccount:c,hideAccountSwitch:!0}),r&&(0,o.createElement)(A.w,{googleAdsAccount:l,hideAccountSwitch:!0},(0,o.createElement)(b.Z.Card.Footer,null,(0,o.createElement)(_.Z,{isDestructive:!0,isLink:!0,onClick:()=>w(S)},(0,d.__)("Disconnect Google Ads account only","google-listings-and-ads")))),(0,o.createElement)(g.Flex,{justify:"flex-end"},(0,o.createElement)(_.Z,{isPrimary:!0,isDestructive:!0,onClick:()=>w(N)},(0,d.__)("Disconnect from all accounts","google-listings-and-ads")))))}var M=n(1984),F=n(1941),W=n(279),H=n(9770),B=n(6483),j=n(2819),R=n(7018);let z=null;function Y(){if(z)return;const e=(0,B.getQueryArgs)(document.location.search),t=t=>{const{target:n}=t;if("A"!==n.tagName)return;const o=[i.Dr.dashboard,i.Dr.reports,i.Dr.productFeed,i.Dr.settings],l=(0,B.getQueryArgs)(n.getAttribute("href"));if(o.includes(l.path)){t.stopPropagation(),t.preventDefault();const n=!(0,R.Z)()||l.path===i.Dr.settings,o=(0,B.getQueryArgs)(document.location.search);if(n&&!(0,j.isEqual)(e,o)){const{path:t,...n}=e;(0,c.getHistory)().push((0,c.getNewPath)(n,t,null))}}};document.defaultView.addEventListener("click",t,!0),document.body.classList.add("gla-reconnection-lock"),z=()=>{document.defaultView.removeEventListener("click",t,!0),document.body.classList.remove("gla-reconnection-lock")}}function Q(){z&&(z(),z=null)}function V(){const{jetpack:e}=(0,m.Z)(),t="yes"===e?.active;return(0,o.useEffect)((()=>{t?((0,c.getHistory)().replace((0,i.ro)()),Q()):Y()}),[t]),e?(0,o.createElement)(G,null,(0,o.createElement)(p.Z,{size:"large"},(0,o.createElement)(H.Z,{className:"gla-wpcom-connection-lost-card",isBorderless:!0,size:"small",icon:(0,o.createElement)(M.Z,{icon:F.Z,size:24}),title:(0,d.__)("Your WordPress.com account has been disconnected.","google-listings-and-ads"),helper:(0,d.__)("Connect your WordPress.com account to ensure your products stay listed on Google. If you do not re-connect, your products can’t be automatically synced to Google, and any existing listings may be removed from Google.","google-listings-and-ads")}),(0,o.createElement)(y.Oc,null))):(0,o.createElement)(W.Z,null)}var U=n(2807),$=n(2109);function J(e){let{email:t}=e;const n=(0,u.Z)(),[l,a]=(0,o.useState)(null),{disconnectGoogleAccount:s}=(0,D.T)(),[i,r]=(0,o.useState)(!1);return(0,o.createElement)(H.Z,{appearance:H.O.GOOGLE,description:t},(0,o.createElement)(g.CardDivider,null),(0,o.createElement)(b.Z.Card.Body,null,(0,o.createElement)(g.Notice,{status:"error",isDismissible:!1},(0,o.createElement)("p",null,(0,o.createInterpolateElement)((0,d.__)("This Google account, <accountEmail />, was not the Google account previously connected to this integration.","google-listings-and-ads"),{accountEmail:(0,o.createElement)("strong",null,t)})),(0,o.createElement)("p",null,(0,d.__)("Thus, it doesn‘t have access to the Google Merchant Center and/or Google Ads account currently connected to this WooCommerce store.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,d.__)("Try connecting with a different Google account, or completely disconnect all your connected accounts.","google-listings-and-ads")))),(0,o.createElement)(b.Z.Card.Footer,{justify:"flex-end"},l&&(0,o.createElement)(I,{onRequestClose:()=>a(null),onDisconnected:()=>{const e=(0,c.getNewPath)(null,"/google/start",null);window.location.href=n+e},disconnectTarget:l}),(0,o.createElement)(_.Z,{isSecondary:!0,isDestructive:!0,disabled:i,onClick:()=>a(N)},(0,d.__)("Disconnect all accounts","google-listings-and-ads")),(0,o.createElement)(_.Z,{isPrimary:!0,loading:i,onClick:()=>{r(!0),s().catch((()=>{r(!1)}))}},(0,d.__)("Try another Google account","google-listings-and-ads"))))}function K(){const{data:e}=(0,$.Z)("getGoogleAccountAccess"),t=(0,U.Z)(l.glaData.adsSetupComplete,e?.scope),n="yes"===e?.active,a=n?"no"===e?.merchant_access||"no"===e?.ads_access:void 0,s=n&&!a&&t.glaRequired;if((0,o.useEffect)((()=>{s?((0,c.getHistory)().replace((0,i.$9)()),Q()):Y()}),[s]),!e)return(0,o.createElement)(W.Z,null);if(!s){const t=a?(0,o.createElement)(J,{email:e.email}):(0,o.createElement)(Z.Z,null);return(0,o.createElement)(b.Z,{title:(0,d.__)("Connect account","google-listings-and-ads")},t)}return null}var X=n(9959),ee=n(2159),te=n(6025),ne=n(741),oe=n(8027),ce=n(3438),le=()=>{(0,X.Z)("full-content");const{updateGoogleMCContactInformation:e}=(0,D.T)(),{data:t}=(0,ee.Z)(),[n,l]=(0,o.useState)(!1),a=t.isAddressFilled&&t.isMCAddressDifferent;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(te.Z,{title:(0,d.__)("Edit store address","google-listings-and-ads"),helpButton:(0,o.createElement)(ne.Z,{eventContext:"edit-store-address"}),backHref:(0,i.ro)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(b.Z,{title:(0,d.__)("Store address","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,d.__)("Your store address is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(oe.Z,{context:"settings-store-address",linkId:"contact-information-read-more",href:"https://woo.com/document/google-listings-and-ads/#contact-information"},(0,d.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(ce.Z,{showValidation:!t.isAddressFilled})),(0,o.createElement)(b.Z,null,(0,o.createElement)(g.Flex,{justify:"flex-end"},(0,o.createElement)(_.Z,{isPrimary:!0,loading:n,disabled:!a,eventName:"gla_contact_information_save_button_click",onClick:()=>{l(!0),e().then((()=>(0,c.getHistory)().push((0,i.ro)()))).catch((()=>l(!1)))}},(0,d.__)("Save details","google-listings-and-ads"))))))},ae=n(2500),se=n(7667),ie=n(699),re=()=>{const e=(0,ae.Z)();return(0,ie.Z)(e),(0,X.Z)("full-content"),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(te.Z,{title:(0,d.__)("Edit phone number","google-listings-and-ads"),helpButton:(0,o.createElement)(ne.Z,{eventContext:"edit-phone-number"}),backHref:(0,i.ro)()}),(0,o.createElement)("div",{className:"gla-settings"},(0,o.createElement)(b.Z,{title:(0,d.__)("Phone number","google-listings-and-ads"),description:(0,o.createElement)("div",null,(0,o.createElement)("p",null,(0,d.__)("Your phone number is required by Google for verification purposes. It will be shared with the Google Merchant Center and will not be displayed to customers.","google-listings-and-ads")),(0,o.createElement)("p",null,(0,o.createElement)(oe.Z,{context:"settings-phone-number",linkId:"contact-information-read-more",href:"https://woo.com/document/google-listings-and-ads/#contact-information"},(0,d.__)("Learn more","google-listings-and-ads"))))},(0,o.createElement)(se.Z,{view:"settings",phoneNumber:e,initEditing:!0}))))},de=n(6439);const ge="gla-settings";var ue=()=>{const{subpath:e}=(0,c.getQuery)();(0,a.Z)();const{google:t}=(0,s.Z)(),n=e===i.h.reconnectGoogleAccount;switch((0,o.useEffect)((()=>{n||"no"!==t?.active||(0,c.getHistory)().replace((0,i.t)(l.L7.GOOGLE_DISCONNECTED))}),[n,t]),e){case i.h.reconnectWPComAccount:return(0,o.createElement)("div",{className:ge},(0,o.createElement)(V,null));case i.h.reconnectGoogleAccount:return(0,o.createElement)(K,null);case i.h.editPhoneNumber:return(0,o.createElement)(re,null);case i.h.editStoreAddress:return(0,o.createElement)(le,null)}return(0,o.createElement)("div",{className:ge},(0,o.createElement)(de.Z,null),(0,o.createElement)(r._,null),(0,o.createElement)(q,null))}}}]);